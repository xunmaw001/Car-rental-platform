!function(){var c=moment();function a(f,e){this.el=document.querySelector(f);this.events=e;this.current=moment().date(1);this.draw();var d=document.querySelector(".today");if(d){var g=this;window.setTimeout(function(){g.openDay(d)},500)}}a.prototype.draw=function(){this.drawHeader();this.drawMonth();this.drawLegend()};a.prototype.drawHeader=function(){var f=this;if(!this.header){this.header=b("div","header");this.header.className="header";this.title=b("h1");var e=b("div","right");e.addEventListener("click",function(){f.nextMonth()});var d=b("div","left");d.addEventListener("click",function(){f.prevMonth()});this.header.appendChild(this.title);this.header.appendChild(e);this.header.appendChild(d);this.el.appendChild(this.header)}this.title.innerHTML=this.current.format("MMMM YYYY")};a.prototype.drawMonth=function(){var d=this;this.events.forEach(function(e){e.date=d.current.clone().date(Math.random()*(29-1)+1)});if(this.month){this.oldMonth=this.month;this.oldMonth.className="month out "+(d.next?"next":"prev");this.oldMonth.addEventListener("webkitAnimationEnd",function(){d.oldMonth.parentNode.removeChild(d.oldMonth);d.month=b("div","month");d.backFill();d.currentMonth();d.fowardFill();d.el.appendChild(d.month);window.setTimeout(function(){d.month.className="month in "+(d.next?"next":"prev")},16)})}else{this.month=b("div","month");this.el.appendChild(this.month);this.backFill();this.currentMonth();this.fowardFill();this.month.className="month new"}};a.prototype.backFill=function(){var d=this.current.clone();var e=d.day();if(!e){return}d.subtract("days",e+1);for(var f=e;f>0;f--){this.drawDay(d.add("days",1))}};a.prototype.fowardFill=function(){var d=this.current.clone().add("months",1).subtract("days",1);var e=d.day();if(e===6){return}for(var f=e;f<6;f++){this.drawDay(d.add("days",1))}};a.prototype.currentMonth=function(){var d=this.current.clone();while(d.month()===this.current.month()){this.drawDay(d);d.add("days",1)}};a.prototype.getWeek=function(d){if(!this.week||d.day()===0){this.week=b("div","week");this.month.appendChild(this.week)}};a.prototype.drawDay=function(d){var i=this;this.getWeek(d);var h=b("div",this.getDayClass(d));h.addEventListener("click",function(){i.openDay(this)});var f=b("div","day-name",d.format("ddd"));var g=b("div","day-number",d.format("DD"));var e=b("div","day-events");this.drawEvents(d,e);h.appendChild(f);h.appendChild(g);h.appendChild(e);this.week.appendChild(h)};a.prototype.drawEvents=function(d,e){if(d.month()===this.current.month()){var f=this.events.reduce(function(h,g){if(g.date.isSame(d,"day")){h.push(g)}return h},[]);f.forEach(function(g){var h=b("span",g.color);e.appendChild(h)})}};a.prototype.getDayClass=function(d){classes=["day"];if(d.month()!==this.current.month()){classes.push("other")}else{if(c.isSame(d,"day")){classes.push("today")}}return classes.join(" ")};a.prototype.openDay=function(i){var h,d;var g=+i.querySelectorAll(".day-number")[0].innerText||+i.querySelectorAll(".day-number")[0].textContent;var f=this.current.clone().date(g);var e=document.querySelector(".details");if(e&&e.parentNode===i.parentNode){h=e;d=document.querySelector(".arrow")}else{if(e){e.addEventListener("webkitAnimationEnd",function(){e.parentNode.removeChild(e)});e.addEventListener("oanimationend",function(){e.parentNode.removeChild(e)});e.addEventListener("msAnimationEnd",function(){e.parentNode.removeChild(e)});e.addEventListener("animationend",function(){e.parentNode.removeChild(e)});e.className="details out"}h=b("div","details in");var d=b("div","arrow");h.appendChild(d);i.parentNode.appendChild(h)}var j=this.events.reduce(function(l,k){if(k.date.isSame(f,"day")){l.push(k)}return l},[]);this.renderEvents(j,h);d.style.left=i.offsetLeft-i.parentNode.offsetLeft+27+"px"};a.prototype.renderEvents=function(h,g){var e=g.querySelector(".events");var j=b("div","events in"+(e?" new":""));h.forEach(function(l){var k=b("div","event");var n=b("div","event-category "+l.color);var m=b("span","",l.eventName);k.appendChild(n);k.appendChild(m);j.appendChild(k)});if(!h.length){var f=b("div","event empty");var i=b("span","","No Appointment");var d=b("a","","Add Appointment");d.className="add__event";d.setAttribute("href","pages/appointment/add-appointment.html");f.appendChild(i);f.appendChild(d);j.appendChild(f)}if(e){e.className="events out";e.addEventListener("webkitAnimationEnd",function(){e.parentNode.removeChild(e);g.appendChild(j)});e.addEventListener("oanimationend",function(){e.parentNode.removeChild(e);g.appendChild(j)});e.addEventListener("msAnimationEnd",function(){e.parentNode.removeChild(e);g.appendChild(j)});e.addEventListener("animationend",function(){e.parentNode.removeChild(e);g.appendChild(j)})}else{g.appendChild(j)}};a.prototype.drawLegend=function(){var e=b("div","legend");var d=this.events.map(function(f){return f.calendar+"|"+f.color}).reduce(function(g,f){if(g.indexOf(f)===-1){g.push(f)}return g},[]).forEach(function(f){var h=f.split("|");var g=b("span","entry "+h[1],h[0]);e.appendChild(g)});this.el.appendChild(e)};a.prototype.nextMonth=function(){this.current.add("months",1);this.next=true;this.draw()};a.prototype.prevMonth=function(){this.current.subtract("months",1);this.next=false;this.draw()};window.Calendar=a;function b(g,d,f){var e=document.createElement(g);if(d){e.className=d}if(f){e.innderText=e.textContent=f}return e}}();!function(){var c=[{eventName:"Heart Operation",calendar:"Work",color:"orange"},{eventName:"Group Meeting",calendar:"Work",color:"orange"},{eventName:"Dentist Meetup",calendar:"Work",color:"orange"},{eventName:"Dr.June Appointment",calendar:"Work",color:"orange"},{eventName:"Regular Holiday",calendar:"Work",color:"blue"},{eventName:"Team Meeting",calendar:"Work",color:"blue"},{eventName:"Dr.Jhon Appointment",calendar:"Work",color:"blue"},{eventName:"Dr.Rick Appointment",calendar:"Work",color:"blue"},{eventName:"Heart Operation",calendar:"Work",color:"orange"},{eventName:"Group Meeting",calendar:"Work",color:"orange"},{eventName:"Dentist Meetup",calendar:"Work",color:"orange"},{eventName:"Dr.June Appointment",calendar:"Work",color:"orange"}];function a(d){}var b=new Calendar("#calendar",c)}();